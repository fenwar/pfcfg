#!/bin/bash

# Volume control script for Pulse Audio

VOLUME_STEP=0x800

SINK_INDEX=$(pactl list short sinks | grep RUNNING | cut -f1)
SINK_NAME=$(pactl list short sinks | grep ^$SINK_INDEX | cut -f2)
SINK_VOLUME=$(pacmd dump | grep "^set-sink-volume $SINK_NAME" | cut -d' ' -f3)

if [ "$1" = "up" ] ; then
    NEW_VOLUME=$(($SINK_VOLUME + $VOLUME_STEP))
elif [ "$1" = "down" ] ; then
    NEW_VOLUME=$(($SINK_VOLUME - $VOLUME_STEP))
elif [ "$1" = "mute" ] ; then
    # Toggle mute
    pactl set-sink-mute $SINK_INDEX toggle
else
    echo $SINK_NAME
    echo $SINK_VOLUME
    NEW_VOLUME=$SINK_VOLUME
fi

echo $SINK_VOLUME "->" $NEW_VOLUME
pactl set-sink-volume $SINK_INDEX $NEW_VOLUME
